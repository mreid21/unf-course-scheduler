import{e as B,r as L,f as d,g as p,i as r,D as o,h as e,E as N,u as J,G as i,H as K,o as R,I as T,J as q,K as v,L as D,M as Q,N as E,O as W}from"./vendor.49686ed3.js";import{u as X,a as Y}from"./index.a31c038f.js";import{u as Z,B as S}from"./BaseModal.740d95ed.js";const ee={class:"flex border rounded-md px-2 py-4"},te={class:"flex grow-0 gap-4"},se=B({props:{name:null,id:null,username:null},emits:["delete","copy"],setup(a,{emit:m}){return(h,l)=>{const f=L("router-link");return d(),p("div",ee,[r(f,{class:"text-left grow",to:{path:`/${a.username}/Plans/${a.id}`}},{default:o(()=>[e("p",null,N(a.name),1)]),_:1},8,["to"]),e("div",te,[e("button",{onClick:l[0]||(l[0]=_=>m("copy",a.id))},"Copy"),e("button",{onClick:l[1]||(l[1]=_=>m("delete",{id:a.id,name:a.name}))},"Delete")])])}}}),ne={key:0,class:"col-start-5 col-end-9 self-center grid gap-2 mb-8 p-4 rounded-lg shadow-sm bg-white"},ae={class:"flex justify-between items-center mb-4"},oe={class:"flex"},le=["onClick"],ce=e("p",null,"Enter a name for the new schedule.",-1),ie={class:"flex"},ue=["disabled"],de=["onClick"],re=e("p",null,"Enter a name for the copy.",-1),me={class:"flex"},pe=["onClick"],ve={key:1},be=B({setup(a){const m=J(),h=X(),{signOut:l}=Y(),{fetchSchedules:f,deleteSchedule:_,copySchedule:O,createSchedule:M}=Z(),P=async()=>{await l(),m.push({name:"Login"})},u=i([]),n=K({id:void 0,name:void 0}),b=i(!1),y=async()=>{const t=await f(h.user.id);t&&(u.value=t)};R(async()=>{await y()});const A=async()=>{if(n.id)u.value=u.value.filter(t=>t.schedule_id!==n.id),C(),await _(n.id);else{C();return}n.id=void 0,n.name=void 0},I=t=>{n.id=t.id,n.name=t.name,b.value=!0},C=()=>{b.value=!1},w=i(!1),c=i(""),$=()=>w.value=!1,V=()=>w.value=!0,U=async()=>{if(c.value)await M(c.value);else return;$(),await y(),c.value=""},g=i(!1),k=i(-1),x=()=>g.value=!1,z=t=>{g.value=!0,k.value=t},F=async()=>{const t=await M("test");t&&k.value!==-1?(await O(k.value,t),await y()):x(),x()};return(t,j)=>{const G=L("font-awesome-icon");return u.value?(d(),p("div",ne,[e("div",ae,[e("span",null,[e("button",{onClick:P,class:"ml-1 btn hover:text-white hover:bg-slate-500"}," Sign Out ")]),e("span",{onClick:V,class:"mr-1 cursor-pointer hover:scale-110"},[r(G,{icon:"plus",size:"lg"})])]),(d(!0),p(T,null,q(u.value,s=>(d(),Q(se,{onDelete:I,onCopy:z,key:s.schedule_id,name:s.schedule_name,id:s.schedule_id,username:E(h).user.user_metadata.username},null,8,["name","id","username"]))),128)),v(r(S,{onClose:C},{main:o(()=>[e("p",null,N(`Are you sure you would like to delete plan ${E(n).name}?`),1)]),actions:o(({close:s})=>[e("div",oe,[e("button",{onClick:A,class:"btn btn--reject"},"Delete"),e("button",{onClick:s,class:"btn btn--primary"},"Cancel",8,le)])]),_:1},512),[[D,b.value]]),v(r(S,{onClose:$},{main:o(()=>[ce]),actions:o(({close:s})=>[v(e("input",{class:"appearance-none rounded-md py-1 px-2 border-2 border-gray-100 w-full",type:"text",name:"name",id:"schedule-name","onUpdate:modelValue":j[0]||(j[0]=H=>c.value=H)},null,512),[[W,c.value]]),e("div",ie,[e("button",{onClick:U,disabled:c.value==="",class:"btn btn--primary"}," Add ",8,ue),e("button",{onClick:s,class:"btn btn--reject"},"Cancel",8,de)])]),_:1},512),[[D,w.value]]),v(r(S,{onClose:x},{main:o(()=>[re]),actions:o(({close:s})=>[e("div",me,[e("button",{onClick:F,class:"btn btn--primary"}," Duplicate "),e("button",{onClick:s,class:"btn btn--reject"},"Cancel",8,pe)])]),_:1},512),[[D,g.value]])])):(d(),p("span",ve,"Loading..."))}}});export{be as default};
